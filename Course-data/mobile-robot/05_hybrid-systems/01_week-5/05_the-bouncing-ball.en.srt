1
00:00:00,012 --> 00:00:04,267
So welcome back. 
today, I would like to investigate a 

2
00:00:04,267 --> 00:00:09,106
particular hybrid system that has to do 
with a bouncing ball. 

3
00:00:09,106 --> 00:00:14,607
So, that is, I take a ball and I drop it 
on a surface and I would first of all, 

4
00:00:14,607 --> 00:00:18,534
like to model it. 
And secondly, like to figure out how the 

5
00:00:18,534 --> 00:00:22,177
ball behaves. 
And the reason why I want to do this is 

6
00:00:22,177 --> 00:00:27,454
not necessarily because I really like 
balls but because this bouncing ball 

7
00:00:27,454 --> 00:00:32,914
example holds the key to another little 
peculiarity of hybrid systems that we 

8
00:00:32,914 --> 00:00:36,257
should be aware of. 
So, here is the set up. 

9
00:00:36,257 --> 00:00:39,632
I have a ball. 
It's h above the ground. 

10
00:00:39,632 --> 00:00:47,133
Now, what happens in between the bounces? 
Well, Newton tells me that force is mass 

11
00:00:47,133 --> 00:00:53,107
times acceleration and, and the 
acceleration is, in fact, -g, where g is 

12
00:00:53,107 --> 00:00:57,557
the gravitational constant. 
So, if I let x1=h and x2 be equal to h 

13
00:00:57,557 --> 00:01:03,313
dot, which is what we always do, 
then what I get is that x dot is this 

14
00:01:03,313 --> 00:01:08,996
thing, 0100 x, which is just the point 
mass, plus this gravitational force 

15
00:01:08,996 --> 00:01:13,630
that's pulling it down. 
Now, let's say that the thing that I'm 

16
00:01:13,630 --> 00:01:19,506
interested in also is, where the ball 
actually is, how high, how high up it is, 

17
00:01:19,506 --> 00:01:23,942
so y is going to be 01 x. 
So, that is my model of the ball. 

18
00:01:23,942 --> 00:01:31,140
What happens at the bounces? Well, you 
could try to model ball deformations and 

19
00:01:31,140 --> 00:01:37,105
whatnot, but that seems rather 
complicated so what we're simply going to 

20
00:01:37,105 --> 00:01:41,478
say is that these are what's called 
inelastic bouncers which mean, which 

21
00:01:41,478 --> 00:01:45,449
means that a little bit of energies 
sucked out of the ball every time it 

22
00:01:45,449 --> 00:01:47,720
bounces. 
And in fact, what we're going to say is 

23
00:01:47,720 --> 00:01:52,076
that velocity, this is the velocity, so 
if the ball is coming down here [SOUND] 

24
00:01:52,076 --> 00:01:55,525
hits the ground then the velocity 
instantaneously flips, it means, that's 

25
00:01:55,525 --> 00:02:00,029
why we have a minus sign there because 
the ball instantaneously flips but we're 

26
00:02:00,029 --> 00:02:04,639
also scaling it with this gamma constant, 
so we're making the velocity change 

27
00:02:04,639 --> 00:02:09,395
direction from downwards to upwards, but 
a little bit less, which means we lost 

28
00:02:09,395 --> 00:02:13,350
some energy in the bounce. 
Well, the position doesn't change in the 

29
00:02:13,350 --> 00:02:17,289
bounce, so this means that my reset 
condition is going to be this. 

30
00:02:17,289 --> 00:02:21,979
This is just encoding this fact that I'm 
flipping a little bit, I'm flipping my 

31
00:02:21,979 --> 00:02:26,799
velocity, and I'm loosing a little bit of 
energy at the time of the bounce. 

32
00:02:26,799 --> 00:02:33,260
Alright, so lets see what this bouncing 
ball hybrid automaton might look like. 

33
00:02:33,260 --> 00:02:39,889
Well, x dot is Ax+b, in this case, not Bu 
and b is 0-g so this is this forcing term 

34
00:02:39,889 --> 00:02:44,845
that is gravity, no big deal. 
Now, what's going to happen is I'm going 

35
00:02:44,845 --> 00:02:49,318
to switch from that mode to itself when 
I'm bouncing. 

36
00:02:49,318 --> 00:02:54,024
And we already saw that the reset 
condition is this inelastic bounce 

37
00:02:54,024 --> 00:02:59,206
condition that says that we're losing a 
little bit of the velocity at the time of 

38
00:02:59,206 --> 00:03:01,987
the bounce. 
So, that's the reset condition. 

39
00:03:01,987 --> 00:03:06,860
Now, the guard condition is what? Well, 
clearly, we're bouncing when we're 

40
00:03:06,860 --> 00:03:11,046
hitting the ground. 
So, we would like the height to be less 

41
00:03:11,046 --> 00:03:14,803
than or equal to 0, right? 
Well, let's see what happens. 

42
00:03:14,803 --> 00:03:19,727
Here comes the ball [SOUND] hits the 
ground, now the height is 0, we're 

43
00:03:19,727 --> 00:03:24,963
switching and now the first thing we do 
is we reverse the velocity but, meaning, 

44
00:03:24,963 --> 00:03:28,695
we're switching. 
But hey, wait a second, the height is 

45
00:03:28,695 --> 00:03:31,479
still less than or equal to 0. 
The height is still 0. 

46
00:03:31,479 --> 00:03:35,419
So, what we're going to do is we're just 
going to end up spinning like crazy if we 

47
00:03:35,419 --> 00:03:37,843
have this guard. 
So, this is not a good guard. 

48
00:03:37,843 --> 00:03:40,873
Let's get rid of it. 
Instead, what we need to do is we're, 

49
00:03:40,873 --> 00:03:44,670
we're going to switch when we come down 
to the ground and the velocity is 

50
00:03:44,670 --> 00:03:49,206
pointing downwards. 
Meaning that h needs to be negative or 

51
00:03:49,206 --> 00:03:51,442
less than or equal 0. 
And h dot has to be less than or equal 0, 

52
00:03:51,442 --> 00:03:56,921
meaning, we're facing downwards. 
Or since h and h dot constitute our 

53
00:03:56,921 --> 00:04:02,984
state, then the guard should really 
simply be that x is less than or equal to 

54
00:04:02,984 --> 00:04:05,187
0. 
That's the guard condition. 

55
00:04:05,187 --> 00:04:10,573
Well, it could be it's just a, the height 
is just 0, but this is really the 

56
00:04:10,573 --> 00:04:15,550
condition that tells us that it's time 
to, to switch. Okay, good. 

57
00:04:15,550 --> 00:04:17,657
So now, we have that. 
Is this any good? 

58
00:04:17,657 --> 00:04:21,632
Well, I mean clearly, it's good. 
It's pretty and we have guards and 

59
00:04:21,632 --> 00:04:24,052
resets. 
But does it model, first of all, 

60
00:04:24,052 --> 00:04:28,497
faithfully what balls do when they 
bounce? And secondly, are there reasons 

61
00:04:28,497 --> 00:04:33,634
why a model like this would cause us to 
be a little bit nervous? To answer that, 

62
00:04:33,634 --> 00:04:39,183
we need to figure out what the ball is 
actually doing if we have this model. 

63
00:04:39,183 --> 00:04:42,675
So, first of all, we have this system 
again now. 

64
00:04:42,675 --> 00:04:47,172
What I would like to know is what is the 
output of this system. 

65
00:04:47,172 --> 00:04:53,204
Well, fast forward, sorry, not forward, 
reverse two weeks and we go back to 

66
00:04:53,204 --> 00:04:58,933
linear time-invariant systems. 
We know what the solution to this system 

67
00:04:58,933 --> 00:05:01,904
is. 
We know that the output is C times this 

68
00:05:01,904 --> 00:05:07,232
bad boy here, that we call the state 
transition matrix, which was fancy speak 

69
00:05:07,232 --> 00:05:12,306
for this matrix exponential times the 
initial condition plus C times this 

70
00:05:12,306 --> 00:05:17,175
rather awkward-looking integral there. 
Now, all of these is, is, is not 

71
00:05:17,175 --> 00:05:21,313
particularly pleasant. 
And I remember vividly how we struggled 

72
00:05:21,313 --> 00:05:26,393
to get through this because there were so 
many integrals to keep track of here. 

73
00:05:26,393 --> 00:05:31,595
Now, in this particular case, we're a 
little bit lucky because this A matrix is 

74
00:05:31,595 --> 00:05:37,113
what's called nilpotent because if I take 
A to the power two, or three, or any high 

75
00:05:37,113 --> 00:05:42,303
there, higher exponential here, then I 
get 0 out. 

76
00:05:42,303 --> 00:05:47,180
And that turns out to be quite wonderful 
for us. 

77
00:05:47,180 --> 00:05:54,362
Why is that? Well, remember, that e^At is 
really this infinite sum. 

78
00:05:54,362 --> 00:05:58,123
A, there should be a parentheses here, I 
apologize. 

79
00:05:58,123 --> 00:06:04,458
0 At to the power of k divided by k!. 
Well, in our case, all the higher order 

80
00:06:04,458 --> 00:06:10,677
A's are equal to 0, so I get first k=0, 
which gives me the identity matrix. 

81
00:06:10,677 --> 00:06:14,682
Then I get k=1, which simply gives me A 
times t. 

82
00:06:14,682 --> 00:06:18,287
And then, I have all the others which are 
equal to 0. 

83
00:06:18,287 --> 00:06:21,732
So, e^At, in this case, is simply this 
matrix. 

84
00:06:21,732 --> 00:06:26,907
Here is the part that comes from the 
adjacent matrix and since A is simply 

85
00:06:26,907 --> 00:06:31,697
that times t, I get the t up here. 
So, this is my e^At or my state 

86
00:06:31,697 --> 00:06:35,597
transition matrix. 
So now, I should be able to plug this 

87
00:06:35,597 --> 00:06:40,512
back into the equation for y and get a 
rather nice looking expression. 

88
00:06:40,512 --> 00:06:42,884
So, let's do that. 
Well, here is C. 

89
00:06:42,884 --> 00:06:47,328
Here is the state transition matrix. 
Here's my initial condition. 

90
00:06:47,328 --> 00:06:52,957
Here's this rather awkward-looking 
differential equation sorry, integral. 

91
00:06:52,957 --> 00:06:58,021
now, we can try to solve that. 
and if we do that, instead of actually 

92
00:06:58,021 --> 00:07:00,527
doing the math, 
I did the math, 

93
00:07:00,527 --> 00:07:06,262
I encourage you to go home and do that. 
I'm just going to write down what the 

94
00:07:06,262 --> 00:07:10,072
solution is. 
It's going to be h0 times the initial 

95
00:07:10,072 --> 00:07:14,162
velocity, 
h dot 0 of t-t0 and that's then minus g/2 

96
00:07:14,162 --> 00:07:18,317
t-t0 squared. 
So, this is what the output looks like in 

97
00:07:18,317 --> 00:07:20,357
between bounces. 
Good. 

98
00:07:20,357 --> 00:07:26,011
Now, that we have that, let's figure out 
how long it takes in between bounces. 

99
00:07:26,011 --> 00:07:30,503
So, let's say that we start at zero o 
clock, at height zero. 

100
00:07:30,503 --> 00:07:36,099
This is when the bounce is about to start 
and then, [SOUND] we want to know how 

101
00:07:36,099 --> 00:07:40,757
long this, this took. 
We want to know how long it took us to 

102
00:07:40,757 --> 00:07:44,524
get back the ground. 
Well, that's simple. 

103
00:07:44,524 --> 00:07:50,791
Let's pick a big time, big T and say, 
well, y at that time t has to be equal to 

104
00:07:50,791 --> 00:07:53,417
0. 
Well, then we plug that in. 

105
00:07:53,417 --> 00:07:59,560
h0=0 not so we don't any turn there we 
just get h dot 0 times T minus this 

106
00:07:59,560 --> 00:08:02,946
thing. 
or another way of writing it is like 

107
00:08:02,946 --> 00:08:06,172
this. 
And you know what, this needs to be equal 

108
00:08:06,172 --> 00:08:09,063
to 0 because h is 0 there and h is 0 
there, 

109
00:08:09,063 --> 00:08:14,108
which is why we have two solutions. 
So, one solution corresponds to T=0, 

110
00:08:14,108 --> 00:08:20,373
which is at the beginning of the bounce. 
And the other solution is when we return 

111
00:08:20,373 --> 00:08:23,777
down. 
So, this is how long it took me to go 

112
00:08:23,777 --> 00:08:29,440
from the ground, up into the air, and 
then back down to the ground. 

113
00:08:29,440 --> 00:08:35,779
This is the time in between bounces. 
Let's compute the accumulated bounce 

114
00:08:35,779 --> 00:08:38,809
times, 
just because we find it amusing. 

115
00:08:38,809 --> 00:08:44,022
Well, the velocity at the beginning, so 
at the first time, let's just say that 

116
00:08:44,022 --> 00:08:47,716
the velocity is v, 
right? So then, the time of the first 

117
00:08:47,716 --> 00:08:51,131
bounce, instead of h dot 0, I just plug 
in v there. 

118
00:08:51,131 --> 00:08:54,722
I get 2v/g, that's the time of the first 
bounce. 

119
00:08:54,722 --> 00:08:57,932
Well, the velocity after the first 
bounce, 

120
00:08:57,932 --> 00:09:03,517
well, the reset condition says that I 
have gamma times v, so okay, I have a new 

121
00:09:03,517 --> 00:09:06,999
v here. 
That's what I'm going to plug into my h 

122
00:09:06,999 --> 00:09:13,186
dot 0 here that immediately tells me that 
the time of the second bounce is, well, 

123
00:09:13,186 --> 00:09:19,639
it's the time of the first bounce plus 
the time it took for the second bounce 

124
00:09:19,639 --> 00:09:23,363
and instead of v, I have v divided by 
gamma there. 

125
00:09:23,363 --> 00:09:29,459
So, that's how long it took me to perform 
two bounces, and so forth. 

126
00:09:29,459 --> 00:09:36,547
This tells me that the time of the nth 
bounce is given by this 2v/g which is 

127
00:09:36,547 --> 00:09:40,577
this term that shows up over and over 
again. 

128
00:09:40,577 --> 00:09:45,527
And then, every bounce gets this gamma to 
the power of k accumulated. 

129
00:09:45,527 --> 00:09:49,612
Now, this is what's called a geometric 
series. 

130
00:09:49,612 --> 00:09:55,247
And if you look that up or you happen to 
know it, if gamma is less than one, which 

131
00:09:55,247 --> 00:09:59,047
means that you're not adding energy at 
the bounce times, 

132
00:09:59,047 --> 00:10:03,047
this thing will actually, okay, and we 
have gamma less than one, 

133
00:10:03,047 --> 00:10:08,472
this will actually converge in the sense 
that when n goes to infinity, this thing 

134
00:10:08,472 --> 00:10:13,696
becomes equal to this expression. 
Well now, maybe some of you are asking, 

135
00:10:13,696 --> 00:10:18,091
so what? [LAUGH] Well, you shouldn't be 
asking so what. 

136
00:10:18,091 --> 00:10:24,613
Well, what's going on there? This is the 
time it takes to perform infinitely many 

137
00:10:24,613 --> 00:10:28,660
bounces, 
infinitely many bounces, and this is less 

138
00:10:28,660 --> 00:10:33,040
than infinity. 
What that means is this bouncing ball is 

139
00:10:33,040 --> 00:10:38,119
going to go [SOUND] infinitely many. 
And there is some time t infinity here 

140
00:10:38,119 --> 00:10:43,379
where this system is just going to grind 
to a halt and our model is just going to 

141
00:10:43,379 --> 00:10:49,773
keep computing bounce after bounce after 
bounce after bounce faster and faster and 

142
00:10:49,773 --> 00:10:53,162
faster. 
And this is actually a serious problem 

143
00:10:53,162 --> 00:10:58,964
that causes our system to actually crash. 
So, the ball bounces in infinite numbers 

144
00:10:58,964 --> 00:11:02,959
of times in finite time. 
And like I said, this is not just a 

145
00:11:02,959 --> 00:11:08,549
mathematical curiosity that shows that we 
can compute geometric series. 

146
00:11:08,549 --> 00:11:13,053
It means that if I'm simulating it, then 
my simulation would crash. 

147
00:11:13,053 --> 00:11:17,586
In fact, I encourage you to write this 
exact model into your favorite simulator 

148
00:11:17,586 --> 00:11:20,897
and watch it crash. 
This also means that if I write down my 

149
00:11:20,897 --> 00:11:24,788
hybrid system like this, then it's 
undefined beyond T infinity because it's 

150
00:11:24,788 --> 00:11:29,346
not clear what's happening beyond there. 
Time is not allowed to go to infinity. 

151
00:11:29,346 --> 00:11:34,020
So, stability, which says what happens 
when T goes to infinity [SOUND] you can't 

152
00:11:34,020 --> 00:11:37,312
even ask that question because t doesn't 
go to infinity. 

153
00:11:37,312 --> 00:11:42,200
what's worse obviously is that real balls 
don't do this, real balls bounce and 

154
00:11:42,200 --> 00:11:46,841
after awhile they lay still, right? 
So, this is also an indication that our 

155
00:11:46,841 --> 00:11:51,202
model is not particularly good. 
And, in fact, this type of phenomenon 

156
00:11:51,202 --> 00:11:56,869
where you have infinitely many switches 
in finite time is known as the Zeno 

157
00:11:56,869 --> 00:12:02,947
Phenomenon, after the philosopher Zeno, 
that had the a tortoise race, a hare. 

158
00:12:02,947 --> 00:12:08,723
And the paradox that Zeno came up with 
was the fact that the hare never managed 

159
00:12:08,723 --> 00:12:13,466
to overtake the tortoise. 
And in the next lecture, we will see, 

160
00:12:13,466 --> 00:12:18,950
first of all, why the tortoise is able to 
beat the hare and what to do about it, 

161
00:12:18,950 --> 00:12:23,816
meaning how do you make the rabbit 
overtake the turtle? Well, that, my 

162
00:12:23,816 --> 00:12:25,762
friends, is the topic of the next 
lecture. 