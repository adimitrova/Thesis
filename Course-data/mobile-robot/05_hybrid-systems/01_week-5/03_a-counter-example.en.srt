1
00:00:00,012 --> 00:00:06,748
What we saw in the previous lecture was 
how to model switch systems in a rather 

2
00:00:06,748 --> 00:00:11,732
general way using these things called 
hybrid automaton. 

3
00:00:11,732 --> 00:00:16,534
today, I want to show that just because 
we know how to design good linear time 

4
00:00:16,534 --> 00:00:21,666
invariant controllers and we know how to 
draw a hybrid automaton, doesn't mean 

5
00:00:21,666 --> 00:00:26,685
that we can just say, [SOUND] we're done, 
we can do everything we want to be able 

6
00:00:26,685 --> 00:00:29,687
to do. 
In fact, what I want to do today is talk 

7
00:00:29,687 --> 00:00:34,323
to you about a rather famous counter 
example that makes thinngs hard when 

8
00:00:34,323 --> 00:00:37,632
you're in the hybrid world. 
So, I'm going to answer the following 

9
00:00:37,632 --> 00:00:41,733
question, what can possibly go wrong when 
you start switching between different 

10
00:00:41,733 --> 00:00:44,638
controllers. 
And this tangle of yarn here is supposed 

11
00:00:44,638 --> 00:00:48,739
to illustrate what can happen when you 
start switching and messing things up 

12
00:00:48,739 --> 00:00:51,102
together in, in rather surprising 
manners. 

13
00:00:51,102 --> 00:00:56,962
Well, lets let's start rather modestly. 
Let's say that I have two modes. 

14
00:00:56,962 --> 00:01:03,867
I have x dot is equal to A1x and x dot is 
equal to A2x and this A1 and A2 matrices 

15
00:01:03,867 --> 00:01:07,702
they look rather 
innocent, if you ask me. 

16
00:01:07,702 --> 00:01:13,252
Some small negative value on the 
diagonals, same small diagonal negative 

17
00:01:13,252 --> 00:01:18,537
values, their epsilons is positive. 
And then, on the off-diagonals, you have 

18
00:01:18,537 --> 00:01:24,017
one and negative two here, and two and 
negative one there. Well, well let's 

19
00:01:24,017 --> 00:01:28,716
check the eigen values, 
that's the first thing we should always 

20
00:01:28,716 --> 00:01:31,896
do. 
Well, it turns out that no matter which 

21
00:01:31,896 --> 00:01:37,027
system you have, both A1 and A2, the 
eigenvalues are both -epsilon plus 

22
00:01:37,027 --> 00:01:40,622
-1.41j. 
Well, what does this mean? Well, the real 

23
00:01:40,622 --> 00:01:46,143
part is equal to -epsilon, which is 
strictly negative, so both systems are 

24
00:01:46,143 --> 00:01:50,538
asymptotically stable, 
meaning that x will die down to the 

25
00:01:50,538 --> 00:01:53,970
origin. 
And both of them have a nonzero imaginary 

26
00:01:53,970 --> 00:01:57,173
component, 
which means that you're going to have 

27
00:01:57,173 --> 00:02:00,530
oscillations, 
alright? So, we have asymptotically 

28
00:02:00,530 --> 00:02:05,833
stable systems with oscillations. 
And, in fact, let's see what happens when 

29
00:02:05,833 --> 00:02:11,435
we start combining these different modes. 
Before we do that though, let's actually 

30
00:02:11,435 --> 00:02:15,285
look at the modes a little bit more 
carefully by themselves. 

31
00:02:15,285 --> 00:02:20,070
So, here is mode 1, x dot is A1x and what 
I've plot that here on this axis is x1 

32
00:02:20,070 --> 00:02:24,780
and what I've plot that here is x2. 
What this would look like if I have time 

33
00:02:24,780 --> 00:02:28,542
here and let's say, x1, is I would gets 
decaying oscillations. 

34
00:02:28,542 --> 00:02:31,733
Well, we don't have that now because I 
plotted x1 and x2. 

35
00:02:31,733 --> 00:02:36,354
And this is where I start, in this case, 
I guess, I started at 1,1 and the system 

36
00:02:36,354 --> 00:02:39,484
starts flowing. 
And because epsilon is small, you're 

37
00:02:39,484 --> 00:02:42,319
going to get closer and closer to zero 
but slowly. 

38
00:02:42,319 --> 00:02:46,545
And you're going to spiral in like this. 
And, you know, t goes to infinity. 

39
00:02:46,545 --> 00:02:51,460
You're going to end up at the origin 
because you have indeed an asymptotically 

40
00:02:51,460 --> 00:02:54,071
stable system. 
So, A1 is well-behaved. 

41
00:02:54,071 --> 00:02:58,803
It spirals a little bit but what do we 
care? We're not afraid of spirals. 

42
00:02:58,803 --> 00:03:02,096
Here's A2. 
It also looks like a spiral but instead 

43
00:03:02,096 --> 00:03:06,187
of a tall and skinny spiral, it's a short 
and chunky spiral. 

44
00:03:06,187 --> 00:03:11,397
Again, we start at 1,1. 
And this system starts spiraling and it 

45
00:03:11,397 --> 00:03:17,507
goes inwards and then, [SOUND] it goes 
like this so it's also asymptotically 

46
00:03:17,507 --> 00:03:23,822
stable as it should but because of the 
particular eigenvectors of these two 

47
00:03:23,822 --> 00:03:28,302
systems, we end up spiraling in slightly 
different ways. 

48
00:03:28,302 --> 00:03:31,802
But the point is we have two stable 
systems. 

49
00:03:31,802 --> 00:03:36,378
Now, let's put them together in a hybrid 
automaton. 

50
00:03:36,378 --> 00:03:42,958
So, this is hybrid automaton number 1. 
I'm going to spiral, tall, and skinny, 

51
00:03:42,958 --> 00:03:48,508
until [0 1]x=0. 
this means that the second component, so 

52
00:03:48,508 --> 00:03:54,867
x2=0 is what this guard means, right? 
And when x2=0, I switch to my short and 

53
00:03:54,867 --> 00:03:58,882
chunky ellipsoid or inward spiraling 
system. 

54
00:03:58,882 --> 00:04:04,872
And then, when x1=0, I switch back. 
So, this is my first hybrid automaton. 

55
00:04:04,872 --> 00:04:09,432
Well, let's see what that actually looks 
like if you do it. 

56
00:04:09,432 --> 00:04:13,187
So, as always. 
we start at 1,1. I start in mode 1 

57
00:04:13,187 --> 00:04:20,057
[SOUND] until this point, right, where 
x2=0, then I switch to mode 2 which as 

58
00:04:20,057 --> 00:04:26,214
the short and chunky ellipsoid. 
Here, x1 becomes 0 and now I switch to 

59
00:04:26,214 --> 00:04:30,792
mode 1 again so we have 1,2,1. 
Now, we switch to mode 2, to mode, 

60
00:04:30,792 --> 00:04:35,064
mode 1, and so forth. 
And as we keep doing that, we spiral in, 

61
00:04:35,064 --> 00:04:40,690
and one thing that you're going to notice 
then is that we're actually ending up at 

62
00:04:40,690 --> 00:04:44,887
the origin at a much faster rate. 
So, this system is not just 

63
00:04:44,887 --> 00:04:49,630
asymptotically stable, it's 
asymptotically stabler, which is not a 

64
00:04:49,630 --> 00:04:54,812
word, by the way than the original 
systems, because it actually converges at 

65
00:04:54,812 --> 00:04:58,215
a faster rate. 
So, by switching, we were able to get to 

66
00:04:58,215 --> 00:05:02,856
the origin faster, which makes you 
wonder, why am I calling this a counter 

67
00:05:02,856 --> 00:05:05,940
example? 
Well, this is not a counter example. 

68
00:05:05,940 --> 00:05:08,366
But aha, 
hybrid automaton number 2, 

69
00:05:08,366 --> 00:05:14,817
maybe that is the counter example. 
It's the same as hybrid automoton number 

70
00:05:14,817 --> 00:05:21,242
1, but I switched the guard conditions. 
So I'm switching from mode 1 to mode 2, 

71
00:05:21,242 --> 00:05:26,122
when x1=0 and I'm switching from mode 2 
to mode 1, when x2=0. 

72
00:05:26,122 --> 00:05:31,615
This seems like a modest enough 
modification if you ask me, but modesty 

73
00:05:31,615 --> 00:05:35,686
in all modesty, 
it turns out that that is a huge deal. 

74
00:05:35,686 --> 00:05:41,185
Now, 1,1 is hiding somewhere here and 
what's happening is that we're now 

75
00:05:41,185 --> 00:05:46,146
starting to spiral out. 
So now, here we have, for instance, that 

76
00:05:46,146 --> 00:05:50,382
x1 became zero. 
Now, we're switching to the, the fat 

77
00:05:50,382 --> 00:05:54,992
spiral. 
Here, x1 becomes 0 and we're switching to 

78
00:05:54,992 --> 00:06:00,356
the skinny spiral. 
And in this way, we're going to end up 

79
00:06:00,356 --> 00:06:07,598
getting further and further out. 
And this is indeed an unstable system and 

80
00:06:07,598 --> 00:06:14,891
this is a little bothering to us because 
I took two stable systems and I put them 

81
00:06:14,891 --> 00:06:18,721
together in a hybrid system, and I got 
instabilities. 

82
00:06:18,721 --> 00:06:23,703
So the punchlines here is, first of all, 
stable modes by themselves, 

83
00:06:23,703 --> 00:06:29,163
that's not enough to guarantee that the 
resulting switch to hybrid systems is 

84
00:06:29,163 --> 00:06:32,752
stable. 
In fact, you may induce instabilities 

85
00:06:32,752 --> 00:06:35,850
through switches. 
And that's a little bit of a downer, to 

86
00:06:35,850 --> 00:06:39,218
be completely honest. 
The other thing is that you can actually 

87
00:06:39,218 --> 00:06:43,428
reverse this and say, you could even 
design unstable modes, which we're never 

88
00:06:43,428 --> 00:06:46,290
going to do. 
But you could and actually get a switch 

89
00:06:46,290 --> 00:06:50,003
system that is stable. 
So basically, you could reverse time when 

90
00:06:50,003 --> 00:06:53,219
we, what just looked at. 
And we get to unstable modes that renders 

91
00:06:53,219 --> 00:06:57,544
the switches But here is how we actually 
will approach this. 

92
00:06:57,544 --> 00:07:02,182
We will design stable modes because it 
would be suicidal to design unstable 

93
00:07:02,182 --> 00:07:06,569
modes and then hopefully, miraculously 
hope that the switches will, will take 

94
00:07:06,569 --> 00:07:09,323
care of it. 
So, we're going to design, design stable 

95
00:07:09,323 --> 00:07:14,777
modes but we need to be aware of the fact 
that the new system is not stable. 

96
00:07:14,777 --> 00:07:20,057
And, in fact, it would be nice if we 
could check that either analytically or 

97
00:07:20,057 --> 00:07:25,712
at least in simulation because the hybrid 
world is a little bit scarier than the 

98
00:07:25,712 --> 00:07:26,950
nonhybrid world. 