1
00:00:01,320 --> 00:00:05,140
Hi, and welcome to Glue Lecture 5, Control
of Mobile Robots.

2
00:00:05,140 --> 00:00:08,310
I'm Smriti Chopra, your instructor for the
Glue Lectures.

3
00:00:09,430 --> 00:00:12,030
And this lecture is titled, Hybrid
Automata.

4
00:00:13,040 --> 00:00:16,160
So this week, Dr. Egerstedt uh,introduced
to

5
00:00:16,160 --> 00:00:19,560
you guys this concept of hybrid control,
right?

6
00:00:19,560 --> 00:00:22,810
Where a system, or in our case, a robot,
has

7
00:00:22,810 --> 00:00:26,950
to go through these different behaviors in
order to complete

8
00:00:26,950 --> 00:00:27,600
a task.

9
00:00:27,600 --> 00:00:32,700
For example go to goal, avoid obstacle,
hop skip jump, whatever.

10
00:00:32,700 --> 00:00:34,980
Different behaviors in order to complete a
task.

11
00:00:34,980 --> 00:00:38,222
And the problem with that is, or not the
problem,

12
00:00:38,222 --> 00:00:40,040
but what you need to keep in mind, is that

13
00:00:40,040 --> 00:00:43,370
now suddenly we need a bigger model that
takes into

14
00:00:43,370 --> 00:00:47,370
account all these little models or little
behaviors of the robots.

15
00:00:47,370 --> 00:00:49,380
And how do we do that?

16
00:00:49,380 --> 00:00:52,610
We do that through something called a
hybrid automata,

17
00:00:52,610 --> 00:00:57,320
which takes into account all these
continuous dynamics, and yet,

18
00:00:57,320 --> 00:01:01,330
switching logic, to switch between
different dynamics or different behaviors.

19
00:01:02,470 --> 00:01:06,610
So basically, an example of a hybrid
automata is this.

20
00:01:06,610 --> 00:01:12,350
Guy here, and it's really nothing but a
finite state machine.

21
00:01:12,350 --> 00:01:16,510
And a state machine is something that just
skips between different states, etc.

22
00:01:16,510 --> 00:01:18,146
So we have

23
00:01:18,146 --> 00:01:22,570
a q, for example, is your counter for
different states.

24
00:01:22,570 --> 00:01:25,010
So when q is 1, you're in this state.

25
00:01:25,010 --> 00:01:25,960
When q is 2, you're here.

26
00:01:25,960 --> 00:01:28,150
When q is 3, you're here.

27
00:01:28,150 --> 00:01:32,990
And each mode, or each state, in itself
has different dynamics, x dots.

28
00:01:32,990 --> 00:01:35,070
Right?
Or different behaviors or modes.

29
00:01:35,070 --> 00:01:37,550
And then you have these guard conditions
that tell

30
00:01:37,550 --> 00:01:42,060
when you want to switch from one mode to
another.

31
00:01:42,060 --> 00:01:43,790
Pretty simple.
And then we have

32
00:01:43,790 --> 00:01:45,470
what we call resets.

33
00:01:45,470 --> 00:01:48,820
Which is basically once you do switch to a
different

34
00:01:48,820 --> 00:01:51,040
mode, do you change your state in any way
or not.

35
00:01:51,040 --> 00:01:54,860
It's just something you can add into the
automata.

36
00:01:54,860 --> 00:01:58,750
So this is a simple example of what a
hybrid automata looks like.

37
00:01:59,890 --> 00:02:03,460
And then we while studying this hybrid
automata,

38
00:02:03,460 --> 00:02:07,760
came across this phenomenon called Zeno
effect, right?

39
00:02:07,760 --> 00:02:08,430
And what is that,

40
00:02:08,430 --> 00:02:09,160
really?

41
00:02:09,160 --> 00:02:12,280
It's this annoying thing that makes your
state or your

42
00:02:12,280 --> 00:02:17,870
system just kind of go really fast between
your guard conditions.

43
00:02:17,870 --> 00:02:24,220
So here your guard, when it's less than 0,
you go from x dot f1 to f2.

44
00:02:24,220 --> 00:02:27,400
When it's greater than equal to 0, you
switch back.

45
00:02:27,400 --> 00:02:30,430
But the problem is when it's equal to 0,
you switch,

46
00:02:30,430 --> 00:02:34,440
and then you just keep switching between
these two modes infinitely fast.

47
00:02:34,440 --> 00:02:37,270
And that's something we don't want in our
system.

48
00:02:37,270 --> 00:02:38,930
And this is called Zeno Phenomenon.

49
00:02:40,160 --> 00:02:44,430
And there's this whole thing called Type 1
Zeno

50
00:02:44,430 --> 00:02:47,390
and Type 2 Zeno, which is studied in the
lectures.

51
00:02:47,390 --> 00:02:50,918
We're going to deal with Type 1 Zenoes,
because we know how to deal with them.

52
00:02:50,918 --> 00:02:53,680
Type 2 Zenoes are tough, and we're not
going to

53
00:02:53,680 --> 00:02:56,060
deal with them here, in this class at
least.

54
00:02:56,060 --> 00:02:59,940
And an example is that, okay, you're given
a system,

55
00:02:59,940 --> 00:03:00,090
right?

56
00:03:00,090 --> 00:03:05,740
This is a simple system here of two
states, and you want

57
00:03:05,740 --> 00:03:10,030
to see if this guy here is Type 1 Zeno or
not.

58
00:03:10,030 --> 00:03:14,130
And once again, just remember that this
effect happens when

59
00:03:14,130 --> 00:03:18,660
you have, lets say, the same guard
condition, but just flipped, right?

60
00:03:18,660 --> 00:03:25,170
So this was g1 and g2, it's possible that
you did not keep going between the

61
00:03:25,170 --> 00:03:26,180
states really fast.

62
00:03:26,180 --> 00:03:29,940
But because it's the same condition here,
g of x, which is less than 0, and then

63
00:03:29,940 --> 00:03:35,370
greater or equal to 0, that's the only way
you get this surface g of x

64
00:03:35,370 --> 00:03:41,580
equal to 0, along which you're going to
keep moving like this, right?

65
00:03:41,580 --> 00:03:42,260
Okay.

66
00:03:42,260 --> 00:03:45,020
So when is it going to be Type 1 Zeno?

67
00:03:45,020 --> 00:03:48,370
This is the first question you ask when
you're designing a system here.

68
00:03:48,370 --> 00:03:50,850
And you have certain conditions for it.

69
00:03:50,850 --> 00:03:52,540
These are the conditions.

70
00:03:52,540 --> 00:03:58,140
Basically, what you want to see is that
this is my surface g of x equal to 0.

71
00:03:58,140 --> 00:04:01,630
And when I'm hitting the surface from
whichever direction I'm coming, either

72
00:04:01,630 --> 00:04:05,990
I'm coming from greater than equal to 0 or
less than 0, right?

73
00:04:05,990 --> 00:04:08,170
Whichever condition I'm coming from, when
I hit the

74
00:04:08,170 --> 00:04:14,380
surface does this particular equation hold
true or not?

75
00:04:14,380 --> 00:04:15,890
Or does this particular condition

76
00:04:15,890 --> 00:04:16,500
hold true or not?

77
00:04:16,500 --> 00:04:18,750
Which is simply just saying that whenever
I hit

78
00:04:18,750 --> 00:04:23,280
a surface, is it true that one mode, or

79
00:04:23,280 --> 00:04:25,740
f1 for example, is pulling me in one
direction,

80
00:04:25,740 --> 00:04:28,670
and f2 is pulling me in the other
direction?

81
00:04:28,670 --> 00:04:33,240
And that's encoded in this condition here.

82
00:04:33,240 --> 00:04:34,930
So it's not always true.

83
00:04:34,930 --> 00:04:38,170
So that's why you want to check when is it
going to be

84
00:04:38,170 --> 00:04:40,890
true that I'm being pulled into different
directions when I hit

85
00:04:40,890 --> 00:04:46,420
the surface, which is g of x equal to 0.
Okay, so this is pretty simple.

86
00:04:48,090 --> 00:04:51,310
You guys saw the derivation in class, etc.

87
00:04:51,310 --> 00:04:55,650
And once this is true, or once you do
determine that

88
00:04:55,650 --> 00:04:57,830
yes, it is a Type 1 Zeno, then what do you
do?

89
00:04:57,830 --> 00:05:03,570
Okay, then you don't want to keep moving
infinitely fast along the surface, right?

90
00:05:03,570 --> 00:05:06,360
What instead you want to do is you want to
slide along the surface.

91
00:05:06,360 --> 00:05:09,980
So once we have found out that it is Type

92
00:05:09,980 --> 00:05:13,560
1 Zeno, we're going to try and induce the
sliding mode instead

93
00:05:13,560 --> 00:05:18,310
of going back and forth really fast so
that, you know,

94
00:05:18,310 --> 00:05:21,180
we kind of remove this whole annoying
thing with Zeno effect.

95
00:05:22,650 --> 00:05:25,330
So we have this example that we just saw.

96
00:05:25,330 --> 00:05:31,622
And now we want to find out, the first
thing, is this in fact Type 1 Zeno or

97
00:05:31,622 --> 00:05:32,300
not, right?

98
00:05:32,300 --> 00:05:38,180
And we saw that we need to do this check
to ensure if it's Type 1 Zeno or not.

99
00:05:38,180 --> 00:05:41,290
And this check is pretty simple, again g
effect equal to 0, and

100
00:05:41,290 --> 00:05:43,539
then see if this condition holds or not,
and we're going to do that.

101
00:05:44,760 --> 00:05:49,050
So we know g of x equal to 0 gives us x
equal to 10, right?

102
00:05:49,050 --> 00:05:52,410
And then your lead derivative, Lf1g, is
really nothing but

103
00:05:52,410 --> 00:05:57,580
the partial derivative of g with respect
to x times f1.

104
00:05:58,610 --> 00:06:03,890
And because your g of x is x minus 10,
your partial derivative of g

105
00:06:03,890 --> 00:06:08,660
with respect to x is going to be just 1
times f1, which is just f1.

106
00:06:08,660 --> 00:06:10,918
Which is 6 minus x, right?

107
00:06:10,918 --> 00:06:11,800
Okay.

108
00:06:11,800 --> 00:06:13,660
And now we want to make sure that our

109
00:06:13,660 --> 00:06:18,570
new derivative is negative, in the f1
direction, right?

110
00:06:18,570 --> 00:06:21,900
So in order to have this expression
negative, we

111
00:06:21,900 --> 00:06:23,740
find now that our x must be greater than
6.

112
00:06:23,740 --> 00:06:26,770
In the same way, with the same math, you
check

113
00:06:26,770 --> 00:06:31,750
out this condition, and it gives you x
greater than 0.

114
00:06:31,750 --> 00:06:34,320
So you have these three things here: x is
equal

115
00:06:34,320 --> 00:06:36,040
to 10, x greater than 6, x greater than 0.

116
00:06:36,040 --> 00:06:38,680
And you want to see if this makes sense or
not.

117
00:06:38,680 --> 00:06:43,720
Will this situation ever occur, right?
And it turns out, of course it will occur,

118
00:06:43,720 --> 00:06:49,000
because x equal to 10 automatically means
x is greater than 6, and x is greater

119
00:06:49,000 --> 00:06:49,430
than 0.

120
00:06:49,430 --> 00:06:52,050
So that means when I hit the surface, I

121
00:06:52,050 --> 00:06:55,510
am in fact going to experience Zer, Zeno
effect.

122
00:06:55,510 --> 00:06:59,220
So we have established that.
Okay.

123
00:06:59,220 --> 00:07:02,350
So yeah, x is equal to 10.
Kind of make sure of that.

124
00:07:02,350 --> 00:07:06,530
And that means that we must in fact do
sliding control.

125
00:07:06,530 --> 00:07:09,540
Because once we hit the surface, we don't
want to keep moving

126
00:07:09,540 --> 00:07:13,980
infinitely fast along that surface, we
want to slide smoothly along the surface.

127
00:07:13,980 --> 00:07:17,530
So we have to do sliding control.
Okay.

128
00:07:17,530 --> 00:07:19,630
So in general form, this is what it looks
like.

129
00:07:21,570 --> 00:07:24,480
The thing is, once you find out that it is
Type

130
00:07:24,480 --> 00:07:29,390
1 Zeno, or that there will be Zeno effect,
now what, right?

131
00:07:29,390 --> 00:07:30,350
You've hit the surface.

132
00:07:30,350 --> 00:07:32,050
You know that this is Zeno effect.

133
00:07:32,050 --> 00:07:34,730
Now what are you going to do?
Now you need to move along that surface.

134
00:07:34,730 --> 00:07:37,650
But to move along that surface, you need
to know the dynamics, right?

135
00:07:37,650 --> 00:07:39,060
You need to know x dot.
How am

136
00:07:39,060 --> 00:07:41,080
I moving along the surface?

137
00:07:41,080 --> 00:07:43,930
So that's what this log diagram here
shows.

138
00:07:43,930 --> 00:07:46,520
This guy in particular is the dynamics or
the x

139
00:07:46,520 --> 00:07:49,960
dot that you employ in order to move along
the surface.

140
00:07:49,960 --> 00:07:53,050
And the way you get this is by taking the

141
00:07:53,050 --> 00:07:58,420
time derivative of your guard condition,
and setting it to 0.

142
00:07:58,420 --> 00:08:04,080
And the logic behind that is because you
want to move on this line, gx equal

143
00:08:04,080 --> 00:08:08,190
to 0, obviously because you want to stay
here where g is 0,

144
00:08:08,190 --> 00:08:11,070
you, you going to say that the time
derivative of g is also 0.

145
00:08:11,070 --> 00:08:14,920
There's no change: g is going to stay
constant at 0.

146
00:08:14,920 --> 00:08:18,170
And that's the whole intuition behind how
you get x dot.

147
00:08:18,170 --> 00:08:22,070
The actual derivation is there in the
lectures, so you

148
00:08:22,070 --> 00:08:24,360
guys can, you know, go refer to it and
stuff.

149
00:08:24,360 --> 00:08:26,280
But I'm just giving you the formula here,
and I'm

150
00:08:26,280 --> 00:08:29,180
telling you how you actually get it by
setting dg by

151
00:08:29,180 --> 00:08:30,130
dt equal to zero.

152
00:08:31,910 --> 00:08:38,230
And okay, let's go back to the sliding
mode dynamics and [COUGH] find them now.

153
00:08:38,230 --> 00:08:40,760
So we know that for this system, we
already

154
00:08:40,760 --> 00:08:45,390
found out our guy is going to have Zeno
effects, right?

155
00:08:45,390 --> 00:08:49,180
So now I'm going to find sliding mode
dynamics by this equation right here.

156
00:08:49,180 --> 00:08:51,150
And there are two ways of doing it.

157
00:08:51,150 --> 00:08:54,310
One is pretty much what I told you, that I
know

158
00:08:54,310 --> 00:08:59,700
it's going to be Type 1 Zeno, so I'm just
going to set dg by dt equal to 0.

159
00:08:59,700 --> 00:09:03,320
And again, g of x is x minus 10.

160
00:09:03,320 --> 00:09:08,060
So dg by dt is going to really be just x
dot, right?

161
00:09:08,060 --> 00:09:12,230
And then when I set x dot equal to 0, well
guess what, I got my dynamics.

162
00:09:12,230 --> 00:09:15,690
So I means when I hit the sliding surface,
I just stop; x dot is 0.

163
00:09:15,690 --> 00:09:16,680
I have no velocity.

164
00:09:16,680 --> 00:09:18,219
I have nothing.
I pretty much just stop.

165
00:09:19,350 --> 00:09:20,450
Okay.

166
00:09:20,450 --> 00:09:23,490
But then, there's another way of doing it,
if you don't want to go through this.

167
00:09:23,490 --> 00:09:27,540
And that's by pretty much solving it
through this expression here.

168
00:09:27,540 --> 00:09:30,630
So you actually compute these little guys,
the derivatives, which we

169
00:09:30,630 --> 00:09:33,390
have done, by the way, and plug them into
this equation.

170
00:09:33,390 --> 00:09:37,054
And then you get x dot.
So remember Lf1g was our f1.

171
00:09:37,054 --> 00:09:40,012
Lf2g was f2, so when you put this

172
00:09:40,012 --> 00:09:44,908
stuff into this guy, this becomes f2f1
minus f1f2,

173
00:09:44,908 --> 00:09:48,790
which is 0.
And so you get x dot equal to 0.

174
00:09:48,790 --> 00:09:53,400
So both ways we saw that we can get our
dynamics, x dot equal to 0.

175
00:09:53,400 --> 00:09:59,610
And that was really the whole point of
this slide, to show you how,

176
00:09:59,610 --> 00:10:05,190
given a system, first you find out if it's
Zeno Type 1 Zeno or not.

177
00:10:05,190 --> 00:10:06,840
Or let's say I tell you it's Type 1 Zeno,
and

178
00:10:06,840 --> 00:10:10,560
then how do you find the sliding mode
dynamics for it?

179
00:10:10,560 --> 00:10:15,290
So all together what happens is, okay, now
I've got this new mode

180
00:10:15,290 --> 00:10:18,560
here, but I need to somehow connect it,
right, to my initial system.

181
00:10:18,560 --> 00:10:19,810
So this is pretty simple.

182
00:10:19,810 --> 00:10:21,770
I know that when I hit the surface, I'm

183
00:10:21,770 --> 00:10:24,020
going to go into the sliding mode,
whichever mode I'm in.

184
00:10:25,550 --> 00:10:27,950
When I'm transitioning, I hit x equal to
10.

185
00:10:27,950 --> 00:10:31,830
I come into the sliding mode, and then, of
course, when I

186
00:10:31,830 --> 00:10:36,710
get out of it, the sliding mode, then I
come back into

187
00:10:36,710 --> 00:10:38,320
my states.

188
00:10:38,320 --> 00:10:42,908
And if you're wondering, you know, how how
do you come out of it well

189
00:10:42,908 --> 00:10:47,193
in this case x dot is 0, so maybe you're
just going to grind to a halt.

190
00:10:47,193 --> 00:10:50,755
But there are times where, you know, your
x dot is not 0.

191
00:10:50,755 --> 00:10:55,719
And you are continuously moving, but your
condition, do you remember that Lf1g

192
00:10:55,719 --> 00:11:00,960
condition should be 0, less than 0,
something else should be greater than 0.

193
00:11:00,960 --> 00:11:01,830
Basically vectors

194
00:11:01,830 --> 00:11:03,150
pointing opposite.

195
00:11:03,150 --> 00:11:05,280
So while moving, if at some point your

196
00:11:05,280 --> 00:11:08,345
vectors stop pointing opposite directions,
or they start

197
00:11:08,345 --> 00:11:10,460
pointing in the same direction, etc,
suddenly now

198
00:11:10,460 --> 00:11:14,110
you don't experience Zeno effect at that
point, right?

199
00:11:14,110 --> 00:11:17,089
And that's how your dynamics are then
going to

200
00:11:17,089 --> 00:11:19,610
just push you out off the sliding mode,

201
00:11:19,610 --> 00:11:23,510
and you're going to get out of it and then
come back to these guys here.

202
00:11:23,510 --> 00:11:26,080
So this is just a general form of it.

203
00:11:27,400 --> 00:11:28,410
Okay?

204
00:11:28,410 --> 00:11:35,097
With that, keep checking the forums, good
luck with Quiz 5, and bye-bye.