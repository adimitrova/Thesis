1
00:00:00,012 --> 00:00:04,419
So the outcome of the last handful of 
lectures, was that we needed something 

2
00:00:04,419 --> 00:00:08,840
more rich to solve complex navigation 
problems, and that something was wall 

3
00:00:08,840 --> 00:00:11,547
following. 
In fact was saw that we really had 2 

4
00:00:11,547 --> 00:00:15,918
barriers, wall following clockwise and 
wall following counter clockwise. 

5
00:00:15,918 --> 00:00:20,350
And, the way we could encode that was to 
take our avoid obstacle behavior and 

6
00:00:20,350 --> 00:00:26,234
simply flip, Either flip it -pi/2 for a 
clockwise negotiation of the obstacle or 

7
00:00:26,234 --> 00:00:31,120
+pi/2 for a counterclockwise negotiation 
of the obstacle. 

8
00:00:31,120 --> 00:00:36,926
What I want to do today is relate this 
wall-following behavior to the induced 

9
00:00:36,926 --> 00:00:40,590
mode when we looked at type 1 zeno in 
hybrid systems. 

10
00:00:40,590 --> 00:00:45,349
And the point with this is really for us 
to first of all, trust that this is the 

11
00:00:45,349 --> 00:00:48,480
right thing to do. 
Trust that we understand alpha. 

12
00:00:48,480 --> 00:00:51,518
And trust that we understand plus or 
minus there. 

13
00:00:51,518 --> 00:00:56,270
We use some kind of inner product rule to 
determine whether or not we should go 

14
00:00:56,270 --> 00:00:59,426
plus and minus. 
Now we're going to see that that's, 

15
00:00:59,426 --> 00:01:02,354
indeed. 
the correct rule from a sliding mode 

16
00:01:02,354 --> 00:01:05,599
vantage point. 
However we're going to do little bit of 

17
00:01:05,599 --> 00:01:09,827
maths today and at the end of it we're 
just going to return back to this and 

18
00:01:09,827 --> 00:01:14,344
say, this is how, still how we going to 
implement it because it is much simpler 

19
00:01:14,344 --> 00:01:18,242
but we need in the math to get there and 
trust a that's correct. 

20
00:01:18,242 --> 00:01:22,662
So here's the general set, set up. 
As before we have an obstacle x sub o. 

21
00:01:22,662 --> 00:01:27,715
We have a goal, X of G, and we have X, 
which is the position of the robot. 

22
00:01:27,715 --> 00:01:32,751
We also have a distance from the 
obstacle, when we're going to switch to 

23
00:01:32,751 --> 00:01:38,523
avoid obstacle as opposed to go to goal, 
and even though I'm doing everything with 

24
00:01:38,523 --> 00:01:43,485
points now This works for non-convex 
obstacles, for pretty much anything. 

25
00:01:43,485 --> 00:01:46,280
We can write that down at least in this 
way. 

26
00:01:46,280 --> 00:01:51,335
And the distance then being constant, 
let's say it's delta from the obstacle, 

27
00:01:51,335 --> 00:01:56,296
when I can simply say that that means 
that the distance between the X and XO is 

28
00:01:56,296 --> 00:02:00,913
equal to Now, what do I have? I have 2 
different behaviors. 

29
00:02:00,913 --> 00:02:06,645
I have one behavior that wants to take me 
towards the goal and I have another 

30
00:02:06,645 --> 00:02:10,790
behavior that wants to push me away from 
the obstacle. 

31
00:02:10,790 --> 00:02:16,067
And now I also have a switching surface 
and I'm going to write this as the 

32
00:02:16,067 --> 00:02:20,760
distance between X and the obstacle minus 
delta, should be equal to 0. 

33
00:02:20,760 --> 00:02:24,715
But, I'm going to put squares in there 
because I'm going to start taking 

34
00:02:24,715 --> 00:02:29,380
derivative and taking the derivative of 
the square of a norm is easy taking the 

35
00:02:29,380 --> 00:02:33,922
derivative of a norm is not so easy, and 
then I'm going to put the half here just 

36
00:02:33,922 --> 00:02:38,932
for the reason of getting rid of some 
Coefficient but this half doesn't change 

37
00:02:38,932 --> 00:02:41,699
anything. 
So now what do I have? I have g. 

38
00:02:41,699 --> 00:02:46,687
On one side I have g positive, which 
means that you're further away from the 

39
00:02:46,687 --> 00:02:51,773
obstacle than delta, which means you're 
out here where you're going to use this 

40
00:02:51,773 --> 00:02:55,058
behavior. 
So we have f1 coming in here, so this is 

41
00:02:55,058 --> 00:02:59,645
going to be my f1. 
And then I have g negative on this other 

42
00:02:59,645 --> 00:03:05,403
side, which is inside here, where I'm 
going to use this behavior. 

43
00:03:05,403 --> 00:03:11,781
So that's going to be equal to f2. 
So I have everything I need to be able to 

44
00:03:11,781 --> 00:03:16,503
unleash our induced mode piece of 
mathematics. 

45
00:03:16,503 --> 00:03:20,193
So, f1 is goal to goal. 
f2 is avoid obstacle. 

46
00:03:20,193 --> 00:03:24,368
Now, we need to connect these somehow 
with the induced mode. 

47
00:03:24,368 --> 00:03:29,184
Well, here is the connection. 
We actually computed the induced mode. 

48
00:03:29,184 --> 00:03:34,025
It was this convex combination of the two 
modes, or the two behaviors. 

49
00:03:34,025 --> 00:03:39,952
And this convex combination was given by 
this, mouthful of Of an expression. 

50
00:03:39,952 --> 00:03:46,380
But let's actually try to compute this, 
in this case, to see what, what the 

51
00:03:46,380 --> 00:03:51,459
induced mode should be. 
Well, first of all, we need the Lee 

52
00:03:51,459 --> 00:03:55,041
derivatives. 
So, lf2g, if you remember. 

53
00:03:55,041 --> 00:03:59,187
That was dg, dx*f2. 
We need the same thing for f1 and then 

54
00:03:59,187 --> 00:04:02,132
this lead derivative show, show up 
repeatedly. 

55
00:04:02,132 --> 00:04:06,959
Well, first of all the derivative of g 
with respect to x is simply x-x obstacle 

56
00:04:06,959 --> 00:04:11,278
transpose and this is the reason why I 
put squares here because that made 

57
00:04:11,278 --> 00:04:16,148
everything easy and I put the half there 
because that hills an extra 2 that would 

58
00:04:16,148 --> 00:04:19,644
show up. 
This really doesn't but it just makes the 

59
00:04:19,644 --> 00:04:24,156
math a little bit easier. 
This is again one of these things that I 

60
00:04:24,156 --> 00:04:28,856
encourage you to try to compute 
yourselves, just to make sure that you 

61
00:04:28,856 --> 00:04:32,556
actually trust that this is indeed the 
correct answer. 

62
00:04:32,556 --> 00:04:37,706
Well, now I can compute the [UNKNOWN] 
derivatives, right? I have LF2G, well 

63
00:04:37,706 --> 00:04:42,272
it's DG/DX times F2 Well the GDX which is 
computed it was that. 

64
00:04:42,272 --> 00:04:47,778
F2 is C avoid obstacle, X-Xo. 
In previous lecture, I used K, with the 

65
00:04:47,778 --> 00:04:53,402
prime index [INAUDIBLE] was C here. 
Well, this is X-Xo transposed times X-X0. 

66
00:04:53,402 --> 00:04:57,062
But that's just X-X0 squared, 
the norm squared. 

67
00:04:57,062 --> 00:05:01,444
So this lead derivative has a rather 
simple expression. 

68
00:05:01,444 --> 00:05:05,302
Similarly, I can compute the other lead 
derivative. 

69
00:05:05,302 --> 00:05:10,041
And its' c, goal to goal times this 
thing, that we now know is an inner 

70
00:05:10,041 --> 00:05:13,596
product of x-x obstacle, transposed times 
x goal minus x. 

71
00:05:13,596 --> 00:05:17,504
So I have the 2 lead derivatives that I 
actually need. 

72
00:05:17,504 --> 00:05:21,979
So, with that, I could go ahead and 
compute the induced mode. 

73
00:05:21,979 --> 00:05:27,362
For instance. 
You know, this little thing here. 

74
00:05:27,362 --> 00:05:36,362
What is that? It is let's see, it's 
(x-xo) transpose times (CAO*(x-xo)), 

75
00:05:36,362 --> 00:05:42,812
that's the first term, minus C goal to 
goal times (xg-x). 

76
00:05:42,812 --> 00:05:48,162
So, that's that term. 
We have an explicit expression for it. 

77
00:05:48,162 --> 00:05:53,537
We can also go ahead, and compute this, 
right, for instance. 

78
00:05:53,537 --> 00:06:00,512
It's CAO, x-x0 transposed times f1. 
Which is, what was f1 again? It was goal 

79
00:06:00,512 --> 00:06:01,925
to goal times xg - 
x.. 

80
00:06:01,925 --> 00:06:05,154
So I can compute this. 
Similarly, I can compute that. 

81
00:06:05,154 --> 00:06:09,373
The point is first of all that everything 
is entirely computable here. 

82
00:06:09,373 --> 00:06:13,255
The other point is, you know what, this 
is a little bit of a mess. 

83
00:06:13,255 --> 00:06:17,884
It's a mess to write it down, but what 
we've actually done is [SOUND] We have 

84
00:06:17,884 --> 00:06:22,832
recovered the same controller because 
what we're doing is again we're sliding. 

85
00:06:22,832 --> 00:06:27,949
The only difference is if you write it in 
this form, you automatically get alpha to 

86
00:06:27,949 --> 00:06:32,102
pop out because you get the certain 
scaling, and you get plus or. 

87
00:06:32,102 --> 00:06:36,192
Minus flip. 
So you actually get the flip for free, 

88
00:06:36,192 --> 00:06:42,252
your told which direction to go and which 
alpha to go in and the nice thing is that 

89
00:06:42,252 --> 00:06:48,407
the flip direction you get from computing 
the induced mode is actually the same as 

90
00:06:48,407 --> 00:06:54,452
taking the inner products with U follow 
ball counter-clockwise with U avoid 

91
00:06:54,452 --> 00:06:58,012
obstacle, if this inner. 
U avoid obstacle. 

92
00:06:58,012 --> 00:07:04,718
If this inner product is positive, we go, 
counter clockwise, and otherwise we go 

93
00:07:04,718 --> 00:07:06,014
clockwise. 
So, 

94
00:07:06,014 --> 00:07:12,801
the nice thing is, we have actually ,in a 
mathematically rather involved way arrive 

95
00:07:12,801 --> 00:07:16,337
at same expression. 
And with the difference being that we can 

96
00:07:16,337 --> 00:07:20,522
have the plus or the minus automatically 
determined for us, and these scaling 

97
00:07:20,522 --> 00:07:24,884
factors automatically determined for us. 
In practice though, we're not going to do 

98
00:07:24,884 --> 00:07:28,622
this, because this is too messy. 
Instead, we're just going to pick some 

99
00:07:28,622 --> 00:07:33,325
alpha that we feel good about. 
I always pick alpha=1 because I'm lazy 

100
00:07:33,325 --> 00:07:39,328
and then use the inner product tasks to 
figure out whether we should go clockwise 

101
00:07:39,328 --> 00:07:44,114
or counter-clockwise. 
So, that's practically what we're going 

102
00:07:44,114 --> 00:07:47,715
to do. 
Now, that's not enough, so let's say that 

103
00:07:47,715 --> 00:07:52,706
I"m going towards the goal here. 
Here I want to go in this direction, and 

104
00:07:52,706 --> 00:07:57,660
avoid obstacle once to take me there, so 
sliding is immediately going to tell me 

105
00:07:57,660 --> 00:08:00,231
that I'm going to start moving up like 
this. 

106
00:08:00,231 --> 00:08:05,191
Well you know what? This was all good and 
Dandy, but if I'm simply looking at the 

107
00:08:05,191 --> 00:08:08,527
sliding rule. 
Then here, all of a sudden I'm pointing 

108
00:08:08,527 --> 00:08:13,357
in both direction, and sliding is going 
to tell me to stop, So what I need to do 

109
00:08:13,357 --> 00:08:19,027
is to just keep following the ball, 
verify then I'm going to follow the ball 

110
00:08:19,027 --> 00:08:24,577
for a long time way and way and way, 
around and around and around and may be 

111
00:08:24,577 --> 00:08:28,100
here the right time to stop following the 
ball. 

112
00:08:28,100 --> 00:08:31,352
The question that really need to answer 
now. 

113
00:08:31,352 --> 00:08:34,887
When we know that follow wall is the 
right thing to do, we know which 

114
00:08:34,887 --> 00:08:38,928
direction to go in, and we know, really 
how to scale it even though we're just 

115
00:08:38,928 --> 00:08:42,773
going to scale it by one because it 
really doesn't matter is when do we 

116
00:08:42,773 --> 00:08:45,025
actually stop this sliding or follow 
wall. 

117
00:08:45,025 --> 00:08:49,122
Well, that turns out not to be so easy 
and in fact there are multiple ways of 

118
00:08:49,122 --> 00:08:55,130
Answering that and this is precisely the 
topic of the next lecture. 