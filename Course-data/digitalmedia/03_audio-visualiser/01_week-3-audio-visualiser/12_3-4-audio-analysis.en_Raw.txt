[sound]. 
in the next section i am going to talk 
about how to use audio in analysis to get 
some information about the sound that's 
currently playing. 
now, you can see in this code here, that 
i've got a player and i'm telling the 
player to do, to start analyzing by 
calling the set analysis. 
set analyzing method and setting it to 
true. 
what that will do is that will cause the 
player to, to begin, not just playing 
back, but also listening to itself 
playing and doing some analysis on there. 
but the type of analysis we're going to 
do, is, is called extracting in the, 
spectrum. 
so we're going to extract from the power 
spectrum of the sound. 
now what does that mean? 
well, the basic idea is that when you 
listen to a sound, there are different 
components in that sound. 
for example, if you listen to very heavy, 
bass-y music like reggae or something 
like that. 
there's a lot of really low frequency 
sound in there, a lot of bass. 
so maybe bass is a more familiar term 
than low frequency, right? 
so if we talk about base that's in the 
low frequencies we can also talk about 
treble which is what makes a sound bright 
and treble the opposite end to bass in 
the description of the sound. 
so we talk about treble and midrange is 
more, things, so speech happens a lot in, 
in the mid-range and hmm, but it has lot 
of trouble bits as well. 
for example, if i go [sound] that's a lot 
of, there is a lot of trouble in that. 
okay, so the idea is that with this 
analysis we can actually get some 
information about what, how much basis in 
that, how much trouble is in there and so 
on and also we know what is the average, 
of, of the level of the sound. 
and as i said the method we said to do 
this is the fast fourier transform, the 
fft. 
and we can get the data out of that and 
turn it into what we call a power 
spectrum, which really is just telling us 
how much power this is in those different 
frequency bands. 
so is there, how much bass is there, but 
not just how much bass and how much 
different bands of bass so low bass and 
medium bass. 
okay. 
and so what we're going to do first is 
just take an average of all of those 
difference frequencies. 
and see if we can use that to, plot a 
signal meter, which will show us what's 
going on in the sound currently. 
so you can see here, i'm pulling out this 
float called pow, which is the average 
power in, in the spectrum. 
so that's looking at all of those bands, 
bass, treble, mid, and taking an average 
of all that. 
and then i'm going to set a color using 
that, and following that i'm going to 
draw a rectangle where the size is set by 
the, by the power as well. 
so let's just code that up and see what 
it looks like. 
so i'm going to have to first deactivate 
a bit of this accelerometer code. 
so i'm going to add another float up 
here. 
float power okay. 
remember i have to say player.set 
analyzing so apologies if you're used to 
american english spelling, and you're 
used to s's instead of zed zeds instead 
of s's. 
but for obvious reasons, we're using ss. 
okay now. 
so that will tell it to start doing that 
analysis. 
so extracting that, that, that spectrum. 
so that i can then ask for it later. 
so, let's do that. 
we'll leave this speed and in fact i'm 
going to delete all of that code, okay. 
so, lets pull out the power. 
power equal player get average power. 
okay, that's what i need to do to pull 
out the average power. 
the player calculates it all for me and 
then i'm going to set a fill color using 
that. 
so i'm going to use the red now and the 
power value actually has been set up so 
it comes in the range zero to one. 
which makes it a little bit easier to 
deal with in the accelorameter data we 
looked at. 
so its in the range zero to one so i 
could just use it directly at that. 
so that's the red component. 
ok so its just going to set the red and 
then i'm going to draw a rectangle with a 
width which is set by the power. 
so again, i just use it as a ratio if you 
like. 
power times width. 
so if it's full power, the bar should go 
all the way across. 
if it's, if it's, as it, as it gets 
lower, it goes less and less across. 
you'll see what that does in a minute. 
the basic idea is that it will be like a 
bouncing bar. 
and height will be the complete height of 
the screen. 
right. 
so now let's run this on the device and 
see what our new volume or power meter 
looks like. 
[music] [music]. 
okay. 
so, it's a bit difficult to see. 
because the red, maybe, is a little bit, 
dim. 
so what i'm going to do. 
and also, i'm not filling in the 
background color as i go. 
let's just fill in the background color. 
because it wipes out, wipes the 
background. 
[music] so i made a few edits to the code 
just to make it so that the background is 
set at, is, is clear every time and the 
power, it should be clearer now. 
[music] okay. 
so that's, okay, that's a bit better. 
[mmm] so there's quite a lot going on in 
that sound. 
so it's not necessarily very clear what, 
what's going on from power there. 
you can see when there are stronger, 
bursts in sound. 
you can see the power bouncing. 
let's just try it with a different sound. 
so you can, you can see from that there 
are the volume meter bounces. 
the power meter bounces, but maybe we can 
use a better sound to illustrate it. 
so we actually have this sound we created 
previously. 
called ping, as i remember. 
and so let's just run it with the ping 
sound. 
and it might be a bit clearer what's 
going on. 
[sound] 
perhaps that's a bit clearer. 
you can see that hmm, the parameter is 
bouncing every time the ping happens. 
so we have covered how you can extract 
some information about the spectrum, but 
it's quite, it's quite low-resolution if 
you like. 
it's not telling us a lot of information 
about what's going on. 
we just looked at the average power which 
was looking at all the frequency bands 
and taking the average power, which is 
basic, kind of like, you know, how loud 
is it right now? 
if you like, which allowed us to draw a 
volume meter. 
now, if you want to get into more detail 
you can actually access not just the 
average power, but you can look at each, 
individual band so you can tell how much 
bass there is, how much mid range there 
is, and how much treble there is. 
so i've got some code on the next slide 
which just shows you the basics of how to 
do that. 
but i'm going to do a more interesting 
example in the editor. 
so let's just look at that code first so 
at the top of your code you can create a 
float array called spec. 
now what's a float array? 
well remember that float is just a single 
variable which can store a number, which 
is something like 1.7 or you has a has a 
decimal place if you like. 
its an accurate number think of it that 
way and float away, you can see we've got 
those square brackets can basically store 
lots of floats. 
now, that makes sense because we don't, 
we want to, we don't just want to store, 
so the average power, we want to store 
the power in every band. 
so we need some place where we can store, 
lots of numbers so that's why we've got 
an array there. 
markers covered arrays in a previous 
lesson and also you can look in his 
additional programming lectures to find 
out more. 
now in the code below so we asked the 
player, we're assuming you've got a 
player created and we ask it to do the 
analysis and then in a draw method, we, 
exp-, we, we ask for the power spectrum 
from the player. 
which will give us the current snapshot 
of whatever the power spectrum is. 
and then, if we get something valid. 
so we check if it's null. 
so we check if we get something valid 
back. 
and then, if we do, we iterate that 
spectrum using a four loop. 
again, four loops are covered in more 
detail in. 
markers additional programming lectures. 
so we've basically stepped through every 
number in that spectrum and we set a fill 
color using that and draw a rectangle 
based on it. 
now as i said earlier that's a basic 
example i want to do a more interesting 
works example where what we're going to 
do is plot that spectrum over time. 
so you can kind of see a map of these 
sounds you've been hearing over time. 
so how we do that is like this. 
so we've got an audio player and in draw 
method, we can play as usual. 
and that will, that won't effect it, 
it'll only cause it to play if it's not 
playing already. 
so it's okay to just keep calling it and, 
we going to try to extract the spectrum 
so first of all we add the float spectrum 
we'll expect so i can target slightly 
more rapidly and here we going to say if. 
so spec equals. 
player get power spectrum, like that. 
and if spec is not input is no so we got 
a valid got something plot, the we type 
in a for loop. 
so we set a variable i to not. 
i has to be smaller than spec dot link so 
and i plus plus so that's going to go 
from zero up to whatever, how many 
numbers there are in that spectrum we've 
just been given. 
okay, and what i'm going to do is i'm 
going plot the spectrum using differently 
colored dots. 
so if the if that, if the power band is, 
is powerful, then it will do a brightly 
colored dot. 
so i'm going to do that using the stroke, 
and i'm going to stroke color is 255, 
which if, if it's just 255 it will give 
us a white color, but 255 times the value 
of the spectrum at i, so as it goes 
through, it will start with the base at 
the, the, the top end of the spectrum. 
that is, the top end of the array. 
and work through the array, and get to 
the treble at the other end. 
okay? 
and then i'm going to draw a point. 
now, the x and y position, the point. 
well, the x position, i'm going to just, 
i'm going to use a variable actually, 
because what i want to do is, i want to, 
each time i plot this, this spectrum, i'm 
going to move along so that i can plot it 
slightly further along the next time. 
which will allow me to, if you like, draw 
a map of that spectrum over time. 
so i'm going to create an integer called 
xpos. 
and set it to naught, in set up so it 
starts at zero. 
my x position is just going to be x 
pause, and my y position will be just i. 
so, as i increases it draws, it will draw 
a line, it will draw these dots down the 
screen where each dot has a different 
color based on the power of that element. 
so next time i'm going to draw, i want x 
pause to go up by four. 
so it moves along by four. 
and since i'm moving along four. 
so imagine i'm drawing these kind of 
dotted lines down-screen. 
i want to, i can also make my stroke 
weight to four. 
so that the dots are drawing, also, are 
four pixels wide. 
okay? 
so that should plot my, my sound over 
time across the screen. 
so let's just. 
let's run that on the device now. 
[sound] [music] okay, so you can see 
it's, it's drawn, let's just stop that 
and i'll explain it, so you can see what 
it's drawn there is but looks like a kind 
of, a bunch of white plotting gray scale 
plot of some sort. 
now the top of that screen wherever the 
bass frequencies and the lower down the 
screen it gets the higher pitches so 
that's how that works. 
and you'll notice there are if you like 
bands, looks like there was more going 
on. 
and those bits were signifying when there 
was a bass drum playing, or a snare drum. 
so that the, the, the break beat kind of 
has a bass, snare, bass, snare sound. 
and you can see that pattern in, in the 
spectrum. 
now, what i want to do is just. 
the problem is that x pause eventually 
gets higher than the width of the screen. 
so it starts plotting off of the edge of 
the screen. 
so you can't see it anymore. 
so what i'll do just to make a final 
change is if x pos is greater than width 
in other words if i've moved off the edge 
of the screen. 
so go back to the other side of the 
screen and wipe it ready to re draw the 
new spectrum okay so set x so it will 
move across the screen. 
drawing the spectrum and when you get to 
the end we go back to the beginning. 
so let's run that on a device now. 
we should see when it gets to the edge of 
the screen it, it returns to the other 
side and starts plotting there again. 
[sound] 
so you can see the double base drum 
there. 
dun, dun, dun, that sound. 
[music] right. 
so that's the spectrum. 
so you can see it's quite dense at the 
top. 
quite dense. 
that means there's plenty of bass going 
on in it. 
and there's, and it sort thins out 
towards the top end. 
so you can definitely see the bass drums 
having a kind of denser sound [music] so 
let's stop that. 
now, i encourage you try and load some 
different sounds into there and record 
yourself and load back into there and 
just trying plotting some different 
sounds and you see what's going on and 
also the layer in the spectrum is perhaps 
more interesting so, you might want to 
plot the first. 
so 50 things in that array and just plot 
them across the whole screen so you can 
really explore what's going on in that 
spectrum so try some different sounds 
explore the spectrum have fun and if you 
can make something more interesting. 
you can also add interactivity so that 
they can slow down the sound speed up and 
see how the spectrum changes so that's 
what i would advise you to go and do. 
and to, to explore this topic further.  [music]
