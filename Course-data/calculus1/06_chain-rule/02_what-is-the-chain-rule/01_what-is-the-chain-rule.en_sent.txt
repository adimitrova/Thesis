[music] many of the functions that we'd most like to differentiate are actually compositions of two different functions.
this happens in the real world, too.
i mean, look, if you change the number of flowers, that's going to affect say how many rabbits there are around to you know, eat those flowers.
and if you change them with rabbits, that'll affect how many wolves that forest can support.
there's some really concrete examples of this.
here's a concrete example.
suppose that f of x is the number of widgets produced with an investment of x dollars, right?
with, with more money, maybe, you can build more widgets.
suppose g of n is the income that you get by selling those n widgets.
what you're probably really interested in is not exactly how many widgets you produce.
what you'd like to know is, for a given investment, how much money are you going to make, right?
well, that's g of f of x minus your initial investment, right, g of f of x is how much money comes in when you sell the widgets that you produced with your initial investment of x dollars, right?
this quantity is measuring the profit on an investment of x dollars in widget production.
we need some framework, some general picture that let's us understand how one thing changing affects something else and how that thing's changing goes on to affect something else.
specifically, if i've got some function h which is a composition of two functions, g of f of x in this case, i'd like to know something about the derivative of h. i want to know how changing x affects f and then how changing f goes on to affect g. and i'd like some sort of formula that gives me that answer, right?
i'd like to know the derivative of h in terms of information about how x is changing affects f and how changing the input to g affects g. i want a formula for the derivative of h in terms of the derivatives of f and the derivative of g. this is exactly what the chain rule does.
what the chain rule says, is that the derivative of the composition is the derivative of g evaluated at f of x times the derivative of f evaluated at x. sometimes, people have the idea that the chain rule looks somehow, that you'd really expect the formula to look very different.
i mean sometimes people think this formula looks a little bit weird, you know?
i'm composing functions, but now it's the derivative of g composes just a function f. what's going on?
you might think that given the fact that the derivative of a sum is the sum of the derivatives.
you might be tempted to think that the derivative of a composition should be the composition of derivatives, but that's not the case.
but the chain rule really is capturing what happens when you chain together these changes.
so let's think about this chain rule, the derivative of g of f of x is g prime f of x times f prime of x in terms of chaining together different changes.
i'm trying to calculate is how changing x changes g of f of x right?
this is the derivative of the composition.
what do i know?
well, i know how changing x will change f of x, right?
this is what the derivative of f is, is, is measuring, right?
the derivative is the ratio of output change to input change.
now, in between here, what i have is the change in f of x will change g of f of x in some way.
this ratio of changes is really the derivative of g at the point of f of x. what is the derivative?
you plug in an input to the derivative to ask how wiggling that input would effect the output and that's exactly what this ratio is.
i'm asking how will f of x is changing affect g of f of x, right?
that's the derivative of g at the point that's wiggling, f of x. well, if you think about it, now, if i just multiply these two things together, then i get the change in g of f of x divided by the change in x. this is the chain rule, right?
if i multiply together g prime f of x and f prime of x, what i'm left with is exactly what i want, the derivative of g of f of x. you can see this pictorially as well.
so here, i've drawn three number lines.
on the first number line, i've drawn x and i imagine x is the input to f. and on the second number line, i've drawn f of x and f of x is now the input to g. and on the last number line, i've drawn g of f of x. the essential question answered by the derivative is how changing x will affect g of f of x?
but since this is a composition of functions, i'm going to analyze the effect of changing x and g of f of x in stages, right?
i'm first going to see how this changing x affect f of x and how f of x is changing affect g of f of x. so let's imagine that i change x by a small quantity.
i'm calling that small quantity h here, h is not a function, just some small number, the amount by which i'm wiggling the input.
now, how is the output affected?
well, that's exactly what the derivative measures.
right?
the derivative of f at x tells me how wiggling the input x would affect the output.
so f prime of x, which is the ratio of output change to input change times an actual input change gives me a first order approximation of the output change.
so i imagine the output is changing by about f prime of x times h. now, how does that change in value of f of x affect g?
well, i have to figure out how wiggling the input to g will affect the output of g and that depends on where i'm calculating the derivative.
i need to calculate the derivative of g at the point f of x, because, f of x is the point that's doing the wiggling.
so, it's the derivative of g at the point f of x that tells me how wiggling the input around f of x would affect the output to g. so it's that derivative times the amount by which the input changed, which is this quantity here, f prime of x times h. and when you look at it this way, you can see that for an input change to x of some small amount h, the output changes by about g prime f of x times f prime of x as much, which is exactly what the chain rule is telling me should be the case.
since this is the correct rule, that the chain rule really is the derivative of the outside at the inside times the derivative fu nction.
let's try to see a numerical example of this thing in action.
so as a numerical example let's consider the function g of x equals x to the 4th power and the function f of x equals 1 plus x to the 3rd power.
andm maybe what i want to try to estimate is g of f of 1.0001, and now, approximately what is that equal to?
well, it's not too hard to calculate g of, of 1, right?
what's f of 1?
well, that's 1 plus 1 cubed, well, that's 2. so what's g of 2> well, that's 2 to the 4th, well, that's 16. so i know that g of f of 1.0001 is going to be close to 16. the question is, how is wiggling the input up to 1.0001 going to affect the output of this composition of functions?
well, i could do it in stages, right?
that's what the chain rule's telling me to do.
so i could calculate first the derivative of f at 1. right?
and the derivative of f is 1 plus 3x squared, so the derivative of f at 1 is 3. and indeed, if i calculate f of 1.0001, that's about 2.0003 and a bit more.
now, i want to try to calculate how changing the input to g will affect the output of g. so i should calculate the derivative of g and that's 4x cubed by the power rule, but where should i evaluate the derivative of g?
your first temptation is to calculate the derivative of g at 1, but that is not a good idea, because you're not wiggling the input 1 to g. what you're really should be calculating is the derivative of g at 2, because it's this 2 that's going to be wiggling.
when you wiggle the input to f, it's the output to f, f of 1, that's going to be changing, so you should calculate the derivative of g there and what is that?
that's 4 times 2 cubed, that's 4 times 8, that's 32. so what we're trying to calculate is g of f of 1.0001 and we know that that's about g of, well, what's f of 1.0001?
it's about 2.0003. so what happens when i wiggle the input of g from 2 to 2.0003?
well, that should be about the output of g at 2 which is 16 plus how much i change the input by, times the derivative of g at the point where the wiggli ng is happening, which is 2 and that's 32. and what's 16 plus 0.0003 times 32, that's 16.0096. so g of f of 1.0001 is about 16.0096. and you can see this 96 just from the chain rule, right?
the relevant thing to calculate is g prime of f of 1 times f prime of 1, right?
this is going to tell me how wiggling the input 1 affects the output and g prime of f of 1 is 32, f prime of 1 is 3, and 32 times 3 is 96. so, that's the chain rule and it's going to take some time for the chain rule to really sink in.
but the chain rule is super important for two very different reasons.
on the one hand, you've ta know the chain rule just to be able to compute derivatives.
a lot of the functions that you'll be asked to differentiate are actually compositions of differentiable functions, so you'll need to use the chain rule to finish those derivative calculations.
but on the other hand, you've gotta know the chain rule just to understand how chained together changes work.
in the real world, a lot of things change, and those changing things affect other things, and those changing things, then go on to affect yet other things.
and you've got, got understand how those changes get composed together, in order to really understand how the real world works.
